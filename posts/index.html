<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/syntax.css">
    
    
    <title>My Blog | Posts</title>


</head><body class="light-theme"><div id="nav-border" class="container">
    <nav id="nav" class="nav justify-content-center">
        
        <a class="nav-link" href="/">
        
        
        <i data-feather="home"></i> 
        
        
        Home
        </a>
        
        <a class="nav-link" href="/tags/">
        
        
        <i data-feather="tag"></i> 
        
        
        Tags
        </a>
        
        <a class="nav-link" href="#" id="toggleDarkModeButton"><i data-feather="sun"></i></a>
        <span style="padding:5px"><input type="text" id="queryTextField"></span><a class="nav-link" href="#" id="searchButton"><i data-feather="search"></i></a>
    </nav>
</div><div id="content" style="margin:20px">
<h1>Posts</h1>

<p>
    <h3><a class="title" href="/posts/native-aot-development/">NativeAOT Development</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2023-05-30">May 30, 2023</time>

    <a class="summary" href="/posts/native-aot-development/">
        <p>This post is written to document the process of development runtime or library features for NativeAOT. This is NOT meant for NativeAOT compiling your application.
Hello Native AOT To begin with, we will start with building a HelloWorld application and then NativeAOT compile it. The application itself is unimportant, we can simply use dotnet new console to create a HelloWorld application.
Next, we add the following MSBuild property to the project file:</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/memory-corruption-4/">Memory Corruption (4)</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2023-05-21">May 21, 2023</time>

    <a class="summary" href="/posts/memory-corruption-4/">
        <p>An object reference pointing to outside of gen 1 In this post, I will talk about yet another memory corruption bug we found and fixed. Check out my previous post for more context and examples.
Symptom As reported in this issue, we are hitting random crashes when running the FASTER database. Their developers kindly narrowed it down into a simple repro.
A few observations  It crashes quickly on some machines, but on some others, it doesn&rsquo;t.</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/memory-corruption-3/">Memory Corruption (3)</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2022-12-17">Dec 17, 2022</time>

    <a class="summary" href="/posts/memory-corruption-3/">
        <p>Another memory corruption bug In this post, I will talk about another memory corruption bug we found and fix together with Mukund. Check out my previous post for more context and examples.
Symptom As reported in this issue, we hit an access violation while we are trying to compare objects for equality when running a test case that is doing some concurrent dictionary of buffers allocated on the POH.
A first look When the program crashes at the object equality check.</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/soccer-with-socks/">Watch Soccer with SOCKS</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2022-12-17">Dec 17, 2022</time>

    <a class="summary" href="/posts/soccer-with-socks/">
        <p>As of the time of writing, tomorrow is the final for World Cup 2022. It is a pity to miss it. Unfortunately, in the US, unlike most other places in the world, you can&rsquo;t watch it for free, while it is available for free online in many other countries.
To get around that restriction, I &hellip;
 hosted a cheap Linux virtual machine on Azure. used SSH as a sock server.</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/debug-maui-android/">Debug MAUI Android</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2022-04-04">Apr 4, 2022</time>

    <a class="summary" href="/posts/debug-maui-android/">
        <p>These days I have been helping the MAUI team to fix some bugs. I always learn something new when I work on something new, and this time is no different. Today I am going to write about how to debug the Android code running inside a MAUI app.
Procedure Step 1: Launching the App. I start the MAUI app in Visual Studio as usual. In this post, I am going to assume that we know how to start an App in Visual Studio.</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/sais/">SA-IS Algorithm</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2021-12-26">Dec 26, 2021</time>

    <a class="summary" href="/posts/sais/">
        <p>Today, I would like to write about my understanding of the SA-IS algorithm for constructing a suffix array.
What is a suffix array? Consider the string &ldquo;banana&rdquo;, this string has 6 suffixes.
   suffix index     banana 0   anana 1   nana 2   ana 3   na 4   a 5    And if we sort them, we have these:</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/spurious-interrupts/">Spurious Interrupts</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2021-10-23">Oct 23, 2021</time>

    <a class="summary" href="/posts/spurious-interrupts/">
        <p>Spurious interrupt In this post, we are going to talk about the spurious interrupt that we see in the console when running Xv6 on v86. I think it is a reflection of a deep problem in Xv6. To get started, let first explain what is a spurious interrupt.
The hardware side The best way to think of spurious interrupts is to think like the programmable interrupt controller (PIC) between the devices (e.</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/ps2-and-a20/">PS/2 and A20</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2021-10-22">Oct 22, 2021</time>

    <a class="summary" href="/posts/ps2-and-a20/">
        <p>PS/2 and A20 If the title of the post doesn&rsquo;t make any sense for you, you are just too young. Well, just kidding. These are really old technologies but still impacting our journey to host Xv6 on v86. In our last post, we were able to run a scenario, but it isn&rsquo;t perfect, it looks like all keyboard inputs are ignored and one must input the command through the UART port.</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/ready-to-run-delay-load/">Ready to Run Delay Load</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2021-10-14">Oct 14, 2021</time>

    <a class="summary" href="/posts/ready-to-run-delay-load/">
        <p>In this series of posts, I will deep dive into ReadyToRun to understand its mechanisms. In my previous post, I briefly explained what is ReadyToRun and what problems do we need to solve. Now we will look into the exact mechanisms.
The example We will start with this very simple example:
using System; namespace ReadyToDebug { class Program { static void Main(string[] args) { for (int i = 0; i &lt; 3; i++) { Console.</p>
    </a>
</p>

<p>
    <h3><a class="title" href="/posts/optimize-bricks/">Optimize Bricks</a></h3>
    

<i data-feather="calendar"></i>
<time datetime="2021-10-06">Oct 6, 2021</time>

    <a class="summary" href="/posts/optimize-bricks/">
        <p>In this post, I am going to talk about an optimization I made in the GC to reduce tail latency.
Scenario One of our customers reported that occassionally, they are observing gen 1 GC taking longer time than usual. Usually, their gen 1 GC takes around 4 milliseconds, but once in a while it could be as long as 15 milliseconds, and this is getting into their tail latencies measurements.</p>
    </a>
</p>

    <ul class="pagination pagination-default">
      <li class="page-item disabled">
        <a aria-disabled="true" aria-label="First" class="page-link" role="button" tabindex="-1"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item disabled">
        <a aria-disabled="true" aria-label="Previous" class="page-link" role="button" tabindex="-1"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/3/" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/2/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/9/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
        </div><p class="footer text-center">Copyright (c) 2023 Andrew Au</p><script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({ startOnLoad: true });</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/prettify.js"></script>
<script src="/js/feather.min.js"></script>
<script src="/index.js"></script>
<script>

  function getCookie(cname) {
    let name = cname + "=";
    let ca = document.cookie.split(';');
    for (let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
  }

  function setCookie(cname, cvalue, exdays) {
    const d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    let expires = "expires=" + d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }

  function ensureIcon() {
    if (document.body.classList.contains("dark-theme")) {
      toggleDarkModeButton.innerHTML = '<i data-feather="sun"></i>';
    } else {
      toggleDarkModeButton.innerHTML = '<i data-feather="moon"></i>';
    }
    feather.replace();
  }
  function saveCookie() {
    if (document.body.classList.contains("dark-theme")) {
      setCookie("darkMode", "true", 365);
    } else {
      setCookie("darkMode", "false", 365);
    }
  }

  function load(pre) {
    link = pre.getAttribute("data-code-link");
    const xhr = new XMLHttpRequest();
    xhr.onload = () => {
      if (xhr.status >= 200 && xhr.status < 300) {
        pre.className = "prettyprint";
        pre.textContent = xhr.responseText;
      }
      prettyPrint();
    };
    xhr.open('GET', link);
    xhr.send();
  }

  function onSearchButtonClicked(e) {
    e.preventDefault();
    var query = $("#queryTextField").val();
    var terms = query.split(' ');
    
    var result = {};
    for (var i = 0; i < terms.length; ++i) {
      var term = terms[i].toLowerCase();
      if (term in index.Terms)
      {
        for (i = 0; i < index.Terms[term].length; i += 2) {
          var doc = index.Terms[term][i];
          var count = index.Terms[term][i + 1];
          if (doc in result) {
            result[doc] += count;
          } else {
            result[doc] = count;
          }
        }
      }
    }
    
    $("#content").empty();
    for (var key in result) {
      $("#content").append($('<a>', {
        href: index.Documents[key].replace("../../content","").replace(".md",""),
        text: index.Titles[key]
      }));
      $("#content").append($('<br>'));
    }
  }

  $(document).ready(function () {
    var darkMode = getCookie("darkMode");
    if (darkMode == "true") {
      document.body.classList.add("dark-theme");
      document.body.classList.remove("light-theme");
    }
    ensureIcon();

    $("#toggleDarkModeButton").click(function (e) {
      e.preventDefault();
      document.body.classList.toggle("dark-theme");
      document.body.classList.toggle("light-theme");
      saveCookie();
      ensureIcon();
    });

    $("#searchButton").click(onSearchButtonClicked);

    var pres = document.getElementsByTagName("pre");
    for (var i = 0; i < pres.length; ++i) {
      var pre = pres[i];
      if (pre.classList.contains("pretty-github-code")) {
        load(pre);
      }
    }
  });

  $(window).on("load", function () {
    $("body").show();
  });
</script></body>
</html>